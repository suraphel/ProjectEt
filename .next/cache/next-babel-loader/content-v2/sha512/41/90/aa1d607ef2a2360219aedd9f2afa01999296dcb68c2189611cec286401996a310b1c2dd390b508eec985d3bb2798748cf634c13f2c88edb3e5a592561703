{"ast":null,"code":"import { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nvar _jsxFileName = \"A:\\\\Projects\\\\NextJs\\\\Demo\\\\demo2\\\\06-onwards-to-a-bigger-project-starting-project\\\\pages\\\\AuthForm.js\";\n// // This page holds the signIn, signUp form, duration  and Authentication Api\n// import {useRef, useState, useContext } from 'react'\n// import AuthenticationContext from '../../Token/LogInAuthentication ';\n// import { useHistory } from 'react-router-dom'\n// import classes from '../../Token/AuthForm.module.css'\n// const LogIn = () =>{\n//     const usernameInputRef =  useRef(); \n//     const passwordInputRef = useRef(); \n//     const history = useHistory(); \n//     const authen = useContext(AuthenticationContext);\n//     const [isLogin, setLogin]=useState();\n//     const [isLoading, setLoading] = useState();\n//     const switchHandler = () => {\n//         setLogin((prevState) => !prevState);\n//     }\n//     const submitHandler = (event) => {\n//         event.preventDefault(); \n//         const enterdEmail = usernameInputRef.current.value; \n//         const enterdPassword = passwordInputRef.current.value;\n//         let url; \n//         if(isLogin){\n//             url ='https://identitytoolkit.googleapis.com/v1/accounts:signInWithPassword?key=AIzaSyBILHtgI_IbbZADrPf-oTa-3nJPvIL4qSs'; \n//             setLoading(true);\n//         }else {\n//             url ='https://identitytoolkit.googleapis.com/v1/accounts:signUp?key=AIzaSyBILHtgI_IbbZADrPf-oTa-3nJPvIL4qSs'; \n//         }\n//         fetch(url, {\n//             method: 'POST',\n//             body: JSON.stringify({\n//                 email:enterdEmail,\n//                 password:enterdPassword,\n//                 returnSecureToken: true,\n//             }),\n//             headers:{\n//                 'Content-Type': 'application/json',\n//             }\n//         }).then(res => {\n//             setLoading(false);\n//              if(res.ok){\n//                 return res.json();\n//              }else {\n//                 return res.json().then(data => {\n//                     const errorMessage = data.error.message;\n//                     throw new Error(errorMessage);\n//                 });            \n//             }\n//              // automatic time limit logout \n//         }).then(data => {\n//             const expirationTime = new Date((new Date().getTime() + (data.expiresIn * 1000)));\n//             authen.logIn(data.idToken, expirationTime.toISOString());\n//             history.replace('/');\n//         })\n//         .catch(err =>{\n//             alert(err.message); \n//         } )\n//     }\n//     return(\n//         <section> \n//         <h1>{isLogin ? 'Login' : 'Create Account'}</h1> \n//             <form onSubmit={submitHandler}>\n//                 <div className ={classes.control}>\n//                     <label htmlFor='email'>Your Email</label> \n//                     <input type='username' id='email' ref={usernameInputRef} />\n//                 </div>\n//                 <div className={classes.control}>\n//                     <label htmlFor='password'>Your Password</label> \n//                     <input type='password' id='password' ref={passwordInputRef} />\n//                 </div>\n//                 <div className ={classes.actions}>\n//                 {!isLoading && <button>{isLogin ? 'LogIn' : 'Create Account'}</button>}\n//                 {!isLoading && <p>Loading ...</p>}  \n//                 <button\n//                     type='button'  \n//                     className={classes.toggle}         \n//                     onclick={switchHandler}>\n//                     {isLogin ? 'Create an Account' : 'Use Existing account'}\n//                 </button> \n//                 </div>\n//             </form>\n//         </section>\n//         );\n//         }\n// export default LogIn; \n//LogIn form and validation with firebase\nimport { useRef, useState, useContext } from 'react';\nimport AuthenticationContext from '../components/Token/LogInAuthentication '; //  import { useHistory } from 'react-router-dom'\n\nimport classes from '../components/userAccount/components/auth/AuthForm.module.css'; // ./auth/AuthForm.module.css'\n// import classes from '../../Token/AuthForm.module.css'\n\nconst AuthForm = () => {\n  const usernameInputRef = useRef();\n  const passwordInputRef = useRef(); // const history = useHistory(); \n\n  const authCtx = useContext(AuthenticationContext); // validation here  \n\n  const {\n    0: isLogin,\n    1: setIsLogin\n  } = useState(true);\n  const {\n    0: isLoading,\n    1: setLoading\n  } = useState(false);\n\n  const switchAuthModeHandler = () => {\n    setIsLogin(prevState => !prevState);\n  };\n\n  const submitHandler = event => {\n    event.preventDefault();\n    const enteredEmail = usernameInputRef.current.value;\n    const enteredPassword = passwordInputRef.current.value;\n    let url;\n\n    if (isLogin) {\n      url = 'https://identitytoolkit.googleapis.com/v1/accounts:signInWithPassword?key=AIzaSyBILHtgI_IbbZADrPf-oTa-3nJPvIL4qSs';\n      setLoading(true);\n    } else {\n      url = 'https://identitytoolkit.googleapis.com/v1/accounts:signUp?key=AIzaSyBILHtgI_IbbZADrPf-oTa-3nJPvIL4qSs';\n    }\n\n    fetch(url, {\n      method: 'POST',\n      body: JSON.stringify({\n        email: enteredEmail,\n        password: enteredPassword,\n        returnSecureToken: true\n      }),\n      headers: {\n        'Content-Type': 'application/json'\n      }\n    }).then(res => {\n      setLoading(false);\n\n      if (res.ok) {\n        return res.json();\n      } else {\n        return res.json().then(data => {\n          //console.log(data); \n          const errorM = data.error.message;\n          throw new Error(errorM); // if a problem look in here       \n        });\n      } // Automatic logout based on time\n\n    }).then(data => {\n      const expirationTime = new Date(new Date().getTime() + +data.expiresIn * 1000);\n      authCtx.login(data.idToken, expirationTime.toISOString()); //  history.replace('/');  \n      // Now the user is logged as he has received a tokken.\n      //console.log(data);\n    }).catch(err => {\n      //error source is built-in message form the firebase\n      alert(err.message);\n    });\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"section\", {\n    className: classes.auth,\n    children: /*#__PURE__*/_jsxDEV(\"form\", {\n      onSubmit: submitHandler,\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: classes.control,\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          htmlFor: \"email\",\n          children: \"Your Email\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 186,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"email\",\n          id: \"email\",\n          ref: usernameInputRef,\n          required: true\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 187,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 185,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: classes.control,\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          htmlFor: \"password\",\n          children: \"Your Password\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 194,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"password\",\n          id: \"password\",\n          ref: passwordInputRef,\n          required: true\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 195,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 193,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: classes.actions,\n        children: [!isLoading && /*#__PURE__*/_jsxDEV(\"button\", {\n          children: isLogin ? 'Login' : 'Create Account'\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 199,\n          columnNumber: 26\n        }, this), isLoading && /*#__PURE__*/_jsxDEV(\"p\", {\n          children: \"Loading...\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 200,\n          columnNumber: 25\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          type: \"button\",\n          className: classes.toggle,\n          onClick: switchAuthModeHandler,\n          children: isLogin ? 'Create new account' : 'Login with existing account'\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 202,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 198,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 184,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 181,\n    columnNumber: 5\n  }, this);\n};\n\nexport default AuthForm; // import React, { useState, useEffect, useRef, useContext } from 'react';\n// import { useHistory } from 'react-router-dom';\n// import Card from '../UI/Card/Card';\n// import classes from './Login.module.css';\n// import Button from '../UI/Button/Button';\n// import AuthenticationContext from '../../../Token/LogInAuthen';\n// // import AuthenticationContext from '../../Token/LogInAuthen'\n// const Login = (props) => {\n// \t\tconst userenterEmail = useRef(); \n// \t\tconst userenterPassword = useRef();\n// \t\tconst [ enteredEmail, setEnteredEmail ] = useState('');\n// \t\tconst [ emailIsValid, setEmailIsValid ] = useState();\n// \t\tconst [ enteredPassword, setEnteredPassword ] = useState('');\n// \t\tconst [ passwordIsValid, setPasswordIsValid ] = useState();\n// \t\tconst [ formIsValid, setFormIsValid ] = useState(false);\n// \t\tconst [isLogin, setIsLogin] =useState(true);\n// \t\tconst [isLoading, setLoading] = useState(false); \n// \t\tconst authentication = useContext(AuthenticationContext); \n// \t\t  const history = useHistory(); \n// \t\t  const switchAuthModeHandler = () => {\n//     \t   setIsLogin((prevState) => !prevState);\n//   };\n// \t\t// useEffect(\n// \t\t// \t() => {\n// \t\t// \t\tsetFormIsValid(enteredEmail.includes('@') && enteredPassword.trim().length > 6);\n// \t\t// \t},\n// \t\t// \t[ setFormIsValid, enteredEmail, enteredPassword ]\n// \t\t// );\n// \t\t// ------------------------------------------------------------------------------------------\t\n// \t\tconst createAccountHandler = (event) => {\n// \t\t\tevent.preventDefault(); \n// \t\t\t// const email = userenterEmail.current.value; \n// \t\t\t// const password = userenterPassword.current.value;\n// \t\t\t// let url; \n// \t\t\t// const submitHandler = (event)=> {\n// \t\t\t// event.preventDefault(); \n//     const enteredEmail = userenterEmail.current.value;  \n//     const enteredPassword = userenterPassword.current.value; \n//     let url; \n//     if(isLogin){\n//       url  = 'https://identitytoolkit.googleapis.com/v1/accounts:signInWithPassword?key=AIzaSyBILHtgI_IbbZADrPf-oTa-3nJPvIL4qSs';\n//    //setLoading(true); \n//     } else {\n//       url = 'https://identitytoolkit.googleapis.com/v1/accounts:signInWithPassword?key=AIzaSyBILHtgI_IbbZADrPf-oTa-3nJPvIL4qSs'; \n//     }\n//     fetch(url,  \n//     {\n//       method:'POST',\n//       body: JSON.stringify({\n//         email: enteredEmail, \n//         password: enteredPassword,\n//         returnSecureToken: true,           \n//       }),          \n//     headers:{\n//     'Content-Type': 'application/json',\n//      },        \n//    }\n//    ).then(res => {\n//     setLoading(false); \n//     if(res.ok){\n//       return res.json(); \n//     }else{          \n//         return res.json().then(data => {\n//           //console.log(data); \n//          const errorM = data.error.message;    \n//          throw new Error(errorM); // if a problem look in here       \n//         });       \n//       }\n//       // Automatic logout based on time\n//    }).then(data =>{\n//     const expirationTime = new Date((new Date().getTime() + ( +data.expiresIn * 1000)));\n//      authentication.login(data.idToken, expirationTime.toISOString()); \n//     history.replace('/'); // Now the user is logged as he has received a tokken.\n//     //console.log(data);\n//    })\n//    .catch(err => {\n//      //error source is built-in message form the firebase\n//     alert(err.message); \n//    });\n//   }; \n// \t\t\t//----------------------------------------\n// \t\t//  if(isLogin){\n// \t\t// \t //logging in \n// \t\t// \turl = 'https://identitytoolkit.googleapis.com/v1/accounts:signInWithPassword?key=AIzaSyBILHtgI_IbbZADrPf-oTa-3nJPvIL4qSs';\n// \t\t//  }else{\n// \t\t// \t //signing up\n// \t\t// \t url = 'https://identitytoolkit.googleapis.com/v1/accounts:signUp?key=AIzaSyBILHtgI_IbbZADrPf-oTa-3nJPvIL4qSs'; \n// \t\t// \t}\n// \t\t//  // const accountHandler = () => {\n// \t\t//  fetch(url,\t\n// \t\t// {\n// \t\t// \tmethod: 'POST',\n// \t\t// \tbody: JSON.stringify({\n// \t\t// \t\temail: email,\n// \t\t// \t\tpassword: password,\n// \t\t// \t\treturnSecureToken: true\n// \t\t// \t}),\n// \t\t// \theaders:{\n// \t\t// \t\t'Content-type' : 'application/json',\n// \t\t// \t},\n// \t\t//  }).then(async res => {\n// \t\t// \tif(res.ok){\n// \t\t// \t\treturn res.json(); \n// \t\t// \t}else{ \n// \t\t// \t\tconst data = await res.json();\n// \t\t// \t\tconst errorM = data.error.message;\n// \t\t// \t\tthrow new Error(errorM);\t\t\t\t\t\t\t\t\n// \t\t// \t}\n// \t\t//  })\n// \t\t//  .catch(err =>{\n// \t\t// \talert(err.message); \n// \t\t//  });\n// \t\t// }\t\n// \t\t//-------------------------------------------------------\n// \t\t// const passwordChangeHandler = (event) => {// }, [emailChangeHandler, passwordChangeHandler])\n// \tconst emailChangeHandler = (event) => {\n// \t\tsetEnteredEmail(event.target.value);\n// \t\tsetFormIsValid(event.target.value.includes('@') && enteredPassword.trim().length > 6);\n// \t};\n// \tconst passwordChangeHandler = (event) => {\n// \t\tsetEnteredPassword(event.target.value);\n// \t\tsetFormIsValid(event.target.value.trim().length > 6 && enteredEmail.includes('@'));\n// \t};\n// \tconst validateEmailHandler = () => {\n// \t\tsetEmailIsValid(enteredEmail.includes('@'));\n// \t};\n// \tconst validatePasswordHandler = () => {\n// \t\tsetPasswordIsValid(enteredPassword.trim().length > 6);\n// \t};\n// \t// const submitHandler = (event) => {\n// \t// \tevent.preventDefault();\n// \t// \tprops.onLogin(enteredEmail, enteredPassword);\n// \t// };\n// \treturn (\n// \t\t  <section className={classes.auth}>\n//     {/*option b/n login or signUp  */}    \n//       <h1>{isLogin ? 'Login '  : 'what ever'}</h1>  \n//       <form onSubmit={createAccountHandler}>\n//         <div className={classes.control}>\n//           <label htmlFor='email'>Your Email</label>\n//           <input type='email' id='email' ref={userenterEmail} required />\n//         </div>\n//         <div className={classes.control}>\n//           <label htmlFor='password'>Your Password</label>\n//           <input type='password' id='password' ref={userenterPassword} required />\n//         </div>\n//         <div className={classes.actions}>\n//           {!isLoading && <button>{isLogin ? 'Login' : 'Create Account'}</button>}\n//           {isLoading && <p>Loading...</p>}\n//           <button\n//             type='button'\n//             className={classes.toggle}\n//             onClick={switchAuthModeHandler}\n//           >\n//             {isLogin ? 'Create new account' : 'Login with existing account'}\n//           </button>\n//         </div>\n//       </form>\n//     </section>\n// \t\t// <Card className={classes.login}>\n// \t\t// \t<form onSubmit={createAccountHandler}>\n// \t\t// \t\t<div className={`${classes.control} ${emailIsValid === false ? classes.invalid : ''}`}>\n// \t\t// \t\t\t<label htmlFor=\"email\">E-Mail form2</label>\n// \t\t// \t\t\t<input\n// \t\t// \t\t\t\ttype=\"email\"\n// \t\t// \t\t\t\tid=\"email\"\n// \t\t// \t\t\t\tref={userenterEmail}\n// \t\t// \t\t\t\tvalue={enteredEmail}\n// \t\t// \t\t\t\tonChange={emailChangeHandler}\n// \t\t// \t\t\t\tonBlur={validateEmailHandler}\n// \t\t// \t\t\t/>\n// \t\t// \t\t</div>\n// \t\t// \t\t<div\n// \t\t// \t\t\tclassName={`${classes.control} ${passwordIsValid === false\n// \t\t// \t\t\t\t? classes.invalid\n// \t\t// \t\t\t\t: ''}`}\n// \t\t// \t\t>\n// \t\t// \t\t\t<label htmlFor=\"password\">Password</label>\n// \t\t// \t\t\t<input\n// \t\t// \t\t\t\ttype=\"password\"\n// \t\t// \t\t\t\tid=\"password\"\n// \t\t// \t\t\t\tref= {userenterPassword}\n// \t\t// \t\t\t\tvalue={enteredPassword}\n// \t\t// \t\t\t\tonChange={passwordChangeHandler}\n// \t\t// \t\t\t\tonBlur={validatePasswordHandler}\n// \t\t// \t\t\t/>\n// \t\t// \t\t</div>\n// \t\t// \t\t<div className={classes.actions}>\n// \t\t// \t\t\t<Button\n// \t\t// \t\t\t\ttype=\"submit\"\n// \t\t// \t\t\t\tclassName={classes.btn}\n// \t\t// \t\t\t\tdisabled={!formIsValid} // deactivate until verified\n// \t\t// \t\t\t> Login </Button>\n// \t\t// \t\t\t<button onClick = {createAccountHandler}> Create an account</button>\n// \t\t// \t\t</div>\n// \t\t// \t</form>\n// \t\t// </Card>\n// \t);\n// };\n// export default Login;","map":{"version":3,"sources":["A:/Projects/NextJs/Demo/demo2/06-onwards-to-a-bigger-project-starting-project/pages/AuthForm.js"],"names":["useRef","useState","useContext","AuthenticationContext","classes","AuthForm","usernameInputRef","passwordInputRef","authCtx","isLogin","setIsLogin","isLoading","setLoading","switchAuthModeHandler","prevState","submitHandler","event","preventDefault","enteredEmail","current","value","enteredPassword","url","fetch","method","body","JSON","stringify","email","password","returnSecureToken","headers","then","res","ok","json","data","errorM","error","message","Error","expirationTime","Date","getTime","expiresIn","login","idToken","toISOString","catch","err","alert","auth","control","actions","toggle"],"mappings":"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ACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AAEA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AAEA;AACA;AACA;AAEA;AACA;AACA;AAEA;AACA;AACA;AACA;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AAEA;AACA;AACA;AACA;AACA;AAEA","sourcesContent":["// // This page holds the signIn, signUp form, duration  and Authentication Api\r\n\r\n// import {useRef, useState, useContext } from 'react'\r\n// import AuthenticationContext from '../../Token/LogInAuthentication ';\r\n// import { useHistory } from 'react-router-dom'\r\n// import classes from '../../Token/AuthForm.module.css'\r\n\r\n// const LogIn = () =>{\r\n//     const usernameInputRef =  useRef(); \r\n//     const passwordInputRef = useRef(); \r\n//     const history = useHistory(); \r\n\r\n//     const authen = useContext(AuthenticationContext);\r\n\r\n//     const [isLogin, setLogin]=useState();\r\n//     const [isLoading, setLoading] = useState();\r\n\r\n//     const switchHandler = () => {\r\n//         setLogin((prevState) => !prevState);\r\n//     }\r\n\r\n//     const submitHandler = (event) => {\r\n//         event.preventDefault(); \r\n\r\n\r\n//         const enterdEmail = usernameInputRef.current.value; \r\n//         const enterdPassword = passwordInputRef.current.value;\r\n\r\n//         let url; \r\n\r\n//         if(isLogin){\r\n//             url ='https://identitytoolkit.googleapis.com/v1/accounts:signInWithPassword?key=AIzaSyBILHtgI_IbbZADrPf-oTa-3nJPvIL4qSs'; \r\n\r\n//             setLoading(true);\r\n//         }else {\r\n//             url ='https://identitytoolkit.googleapis.com/v1/accounts:signUp?key=AIzaSyBILHtgI_IbbZADrPf-oTa-3nJPvIL4qSs'; \r\n//         }\r\n//         fetch(url, {\r\n//             method: 'POST',\r\n//             body: JSON.stringify({\r\n//                 email:enterdEmail,\r\n//                 password:enterdPassword,\r\n//                 returnSecureToken: true,\r\n//             }),\r\n//             headers:{\r\n//                 'Content-Type': 'application/json',\r\n//             }\r\n//         }).then(res => {\r\n//             setLoading(false);\r\n//              if(res.ok){\r\n//                 return res.json();\r\n//              }else {\r\n//                 return res.json().then(data => {\r\n//                     const errorMessage = data.error.message;\r\n//                     throw new Error(errorMessage);\r\n//                 });            \r\n//             }\r\n//              // automatic time limit logout \r\n//         }).then(data => {\r\n//             const expirationTime = new Date((new Date().getTime() + (data.expiresIn * 1000)));\r\n//             authen.logIn(data.idToken, expirationTime.toISOString());\r\n//             history.replace('/');\r\n\r\n//         })\r\n//         .catch(err =>{\r\n//             alert(err.message); \r\n//         } )\r\n//     }\r\n\r\n//     return(\r\n//         <section> \r\n//         <h1>{isLogin ? 'Login' : 'Create Account'}</h1> \r\n//             <form onSubmit={submitHandler}>\r\n//                 <div className ={classes.control}>\r\n//                     <label htmlFor='email'>Your Email</label> \r\n//                     <input type='username' id='email' ref={usernameInputRef} />\r\n//                 </div>\r\n                \r\n//                 <div className={classes.control}>\r\n//                     <label htmlFor='password'>Your Password</label> \r\n//                     <input type='password' id='password' ref={passwordInputRef} />\r\n//                 </div>\r\n\r\n//                 <div className ={classes.actions}>\r\n//                 {!isLoading && <button>{isLogin ? 'LogIn' : 'Create Account'}</button>}\r\n//                 {!isLoading && <p>Loading ...</p>}  \r\n//                 <button\r\n//                     type='button'  \r\n//                     className={classes.toggle}         \r\n//                     onclick={switchHandler}>\r\n//                     {isLogin ? 'Create an Account' : 'Use Existing account'}\r\n//                 </button> \r\n//                 </div>\r\n//             </form>\r\n//         </section>\r\n//         );\r\n//         }\r\n\r\n// export default LogIn; \r\n\r\n//LogIn form and validation with firebase\r\n\r\n\r\nimport {useRef, useState, useContext } from 'react'\r\n import AuthenticationContext from '../components/Token/LogInAuthentication ';\r\n\r\n//  import { useHistory } from 'react-router-dom'\r\n  import classes from '../components/userAccount/components/auth/AuthForm.module.css'\r\n  // ./auth/AuthForm.module.css'\r\n// import classes from '../../Token/AuthForm.module.css'\r\n\r\nconst AuthForm = () => {\r\n  const usernameInputRef = useRef(); \r\n  const passwordInputRef = useRef(); \r\n  // const history = useHistory(); \r\n\r\n\r\n  const authCtx = useContext(AuthenticationContext); \r\n  // validation here  \r\n  const [isLogin, setIsLogin] = useState(true);\r\n  const [isLoading, setLoading] = useState(false); \r\n  \r\n\r\n  const switchAuthModeHandler = () => {\r\n    setIsLogin((prevState) => !prevState);\r\n  };\r\n\r\n  const submitHandler = (event)=> {\r\n    event.preventDefault(); \r\n\r\n    const enteredEmail = usernameInputRef.current.value;  \r\n    const enteredPassword = passwordInputRef.current.value; \r\n\r\n    let url; \r\n\r\n    if(isLogin){\r\n      url  = 'https://identitytoolkit.googleapis.com/v1/accounts:signInWithPassword?key=AIzaSyBILHtgI_IbbZADrPf-oTa-3nJPvIL4qSs';\r\n     \r\n   setLoading(true); \r\n    } else {\r\n      url = 'https://identitytoolkit.googleapis.com/v1/accounts:signUp?key=AIzaSyBILHtgI_IbbZADrPf-oTa-3nJPvIL4qSs'; \r\n    }\r\n    fetch(url,  \r\n    {\r\n      method:'POST',\r\n      body: JSON.stringify({\r\n        email: enteredEmail, \r\n        password: enteredPassword,\r\n        returnSecureToken: true,           \r\n      }),          \r\n    headers:{\r\n    'Content-Type': 'application/json',\r\n     },        \r\n   }\r\n   ).then(res => {\r\n    setLoading(false); \r\n    if(res.ok){\r\n      return res.json(); \r\n    }else{          \r\n        return res.json().then(data => {\r\n          //console.log(data); \r\n         const errorM = data.error.message;    \r\n         throw new Error(errorM); // if a problem look in here       \r\n        });       \r\n      }\r\n      // Automatic logout based on time\r\n   }).then(data =>{\r\n    const expirationTime = new Date((new Date().getTime() + ( +data.expiresIn * 1000)));\r\n    authCtx.login(data.idToken, expirationTime.toISOString()); \r\n    //  history.replace('/');  \r\n    // Now the user is logged as he has received a tokken.\r\n    //console.log(data);\r\n   })\r\n   .catch(err => {\r\n     //error source is built-in message form the firebase\r\n    alert(err.message); \r\n   });\r\n  }; \r\n\r\n  return (\r\n    <section className={classes.auth}>\r\n    {/*option b/n login or signUp  */}    \r\n      \r\n      <form onSubmit={submitHandler}>\r\n        <div className={classes.control}>\r\n          <label htmlFor='email'>Your Email</label>\r\n          <input type='email'\r\n           id='email' \r\n          ref={usernameInputRef}\r\n           required />\r\n        </div>\r\n\r\n        <div className={classes.control}>\r\n          <label htmlFor='password'>Your Password</label>\r\n          <input type='password' id='password' ref={passwordInputRef} required />\r\n        </div>\r\n\r\n        <div className={classes.actions}>\r\n          {!isLoading && <button>{isLogin ? 'Login' : 'Create Account'}</button>}\r\n          {isLoading && <p>Loading...</p>}\r\n\r\n          <button\r\n            type='button'\r\n            className={classes.toggle}\r\n            onClick={switchAuthModeHandler}>\r\n            {isLogin ? 'Create new account' : 'Login with existing account'}\r\n          </button>\r\n        </div>\r\n      </form>\r\n    </section>\r\n  );\r\n};\r\n\r\nexport default AuthForm;\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n// import React, { useState, useEffect, useRef, useContext } from 'react';\r\n// import { useHistory } from 'react-router-dom';\r\n\r\n\r\n// import Card from '../UI/Card/Card';\r\n// import classes from './Login.module.css';\r\n// import Button from '../UI/Button/Button';\r\n// import AuthenticationContext from '../../../Token/LogInAuthen';\r\n\r\n\r\n\r\n\r\n// // import AuthenticationContext from '../../Token/LogInAuthen'\r\n\r\n// const Login = (props) => {\r\n\r\n// \t\tconst userenterEmail = useRef(); \r\n// \t\tconst userenterPassword = useRef();\r\n\r\n// \t\tconst [ enteredEmail, setEnteredEmail ] = useState('');\r\n// \t\tconst [ emailIsValid, setEmailIsValid ] = useState();\r\n// \t\tconst [ enteredPassword, setEnteredPassword ] = useState('');\r\n// \t\tconst [ passwordIsValid, setPasswordIsValid ] = useState();\r\n\r\n// \t\tconst [ formIsValid, setFormIsValid ] = useState(false);\r\n\r\n// \t\tconst [isLogin, setIsLogin] =useState(true);\r\n// \t\tconst [isLoading, setLoading] = useState(false); \r\n\r\n// \t\tconst authentication = useContext(AuthenticationContext); \r\n// \t\t  const history = useHistory(); \r\n\r\n// \t\t  const switchAuthModeHandler = () => {\r\n//     \t   setIsLogin((prevState) => !prevState);\r\n//   };\r\n\r\n// \t\t// useEffect(\r\n// \t\t// \t() => {\r\n// \t\t// \t\tsetFormIsValid(enteredEmail.includes('@') && enteredPassword.trim().length > 6);\r\n// \t\t// \t},\r\n// \t\t// \t[ setFormIsValid, enteredEmail, enteredPassword ]\r\n// \t\t// );\r\n// \t\t// ------------------------------------------------------------------------------------------\t\r\n// \t\tconst createAccountHandler = (event) => {\r\n// \t\t\tevent.preventDefault(); \r\n\r\n// \t\t\t// const email = userenterEmail.current.value; \r\n// \t\t\t// const password = userenterPassword.current.value;\r\n// \t\t\t// let url; \r\n// \t\t\t// const submitHandler = (event)=> {\r\n// \t\t\t// event.preventDefault(); \r\n\r\n\t\r\n\r\n//     const enteredEmail = userenterEmail.current.value;  \r\n//     const enteredPassword = userenterPassword.current.value; \r\n\r\n//     let url; \r\n\r\n//     if(isLogin){\r\n//       url  = 'https://identitytoolkit.googleapis.com/v1/accounts:signInWithPassword?key=AIzaSyBILHtgI_IbbZADrPf-oTa-3nJPvIL4qSs';\r\n     \r\n//    //setLoading(true); \r\n//     } else {\r\n//       url = 'https://identitytoolkit.googleapis.com/v1/accounts:signInWithPassword?key=AIzaSyBILHtgI_IbbZADrPf-oTa-3nJPvIL4qSs'; \r\n//     }\r\n//     fetch(url,  \r\n//     {\r\n//       method:'POST',\r\n//       body: JSON.stringify({\r\n//         email: enteredEmail, \r\n//         password: enteredPassword,\r\n//         returnSecureToken: true,           \r\n//       }),          \r\n//     headers:{\r\n//     'Content-Type': 'application/json',\r\n//      },        \r\n//    }\r\n//    ).then(res => {\r\n//     setLoading(false); \r\n//     if(res.ok){\r\n//       return res.json(); \r\n//     }else{          \r\n//         return res.json().then(data => {\r\n//           //console.log(data); \r\n//          const errorM = data.error.message;    \r\n//          throw new Error(errorM); // if a problem look in here       \r\n//         });       \r\n//       }\r\n//       // Automatic logout based on time\r\n//    }).then(data =>{\r\n//     const expirationTime = new Date((new Date().getTime() + ( +data.expiresIn * 1000)));\r\n//      authentication.login(data.idToken, expirationTime.toISOString()); \r\n//     history.replace('/'); // Now the user is logged as he has received a tokken.\r\n//     //console.log(data);\r\n//    })\r\n//    .catch(err => {\r\n//      //error source is built-in message form the firebase\r\n//     alert(err.message); \r\n//    });\r\n//   }; \r\n\r\n// \t\t\t//----------------------------------------\r\n// \t\t//  if(isLogin){\r\n// \t\t// \t //logging in \r\n// \t\t// \turl = 'https://identitytoolkit.googleapis.com/v1/accounts:signInWithPassword?key=AIzaSyBILHtgI_IbbZADrPf-oTa-3nJPvIL4qSs';\r\n// \t\t//  }else{\r\n// \t\t// \t //signing up\r\n// \t\t// \t url = 'https://identitytoolkit.googleapis.com/v1/accounts:signUp?key=AIzaSyBILHtgI_IbbZADrPf-oTa-3nJPvIL4qSs'; \r\n// \t\t// \t}\r\n// \t\t//  // const accountHandler = () => {\r\n// \t\t//  fetch(url,\t\r\n// \t\t// {\r\n// \t\t// \tmethod: 'POST',\r\n// \t\t// \tbody: JSON.stringify({\r\n// \t\t// \t\temail: email,\r\n// \t\t// \t\tpassword: password,\r\n// \t\t// \t\treturnSecureToken: true\r\n// \t\t// \t}),\r\n// \t\t// \theaders:{\r\n// \t\t// \t\t'Content-type' : 'application/json',\r\n// \t\t// \t},\r\n// \t\t//  }).then(async res => {\r\n// \t\t// \tif(res.ok){\r\n// \t\t// \t\treturn res.json(); \r\n// \t\t// \t}else{ \r\n// \t\t// \t\tconst data = await res.json();\r\n// \t\t// \t\tconst errorM = data.error.message;\r\n// \t\t// \t\tthrow new Error(errorM);\t\t\t\t\t\t\t\t\r\n// \t\t// \t}\r\n// \t\t//  })\r\n// \t\t//  .catch(err =>{\r\n// \t\t// \talert(err.message); \r\n// \t\t//  });\r\n// \t\t// }\t\r\n// \t\t//-------------------------------------------------------\r\n\t\r\n// \t\t// const passwordChangeHandler = (event) => {// }, [emailChangeHandler, passwordChangeHandler])\r\n\r\n// \tconst emailChangeHandler = (event) => {\r\n// \t\tsetEnteredEmail(event.target.value);\r\n// \t\tsetFormIsValid(event.target.value.includes('@') && enteredPassword.trim().length > 6);\r\n// \t};\r\n\r\n// \tconst passwordChangeHandler = (event) => {\r\n// \t\tsetEnteredPassword(event.target.value);\r\n// \t\tsetFormIsValid(event.target.value.trim().length > 6 && enteredEmail.includes('@'));\r\n// \t};\r\n\r\n// \tconst validateEmailHandler = () => {\r\n// \t\tsetEmailIsValid(enteredEmail.includes('@'));\r\n// \t};\r\n\r\n// \tconst validatePasswordHandler = () => {\r\n// \t\tsetPasswordIsValid(enteredPassword.trim().length > 6);\r\n// \t};\r\n\r\n// \t// const submitHandler = (event) => {\r\n// \t// \tevent.preventDefault();\r\n// \t// \tprops.onLogin(enteredEmail, enteredPassword);\r\n// \t// };\r\n\r\n\r\n// \treturn (\r\n// \t\t  <section className={classes.auth}>\r\n//     {/*option b/n login or signUp  */}    \r\n//       <h1>{isLogin ? 'Login '  : 'what ever'}</h1>  \r\n//       <form onSubmit={createAccountHandler}>\r\n//         <div className={classes.control}>\r\n//           <label htmlFor='email'>Your Email</label>\r\n//           <input type='email' id='email' ref={userenterEmail} required />\r\n//         </div>\r\n//         <div className={classes.control}>\r\n//           <label htmlFor='password'>Your Password</label>\r\n//           <input type='password' id='password' ref={userenterPassword} required />\r\n//         </div>\r\n//         <div className={classes.actions}>\r\n//           {!isLoading && <button>{isLogin ? 'Login' : 'Create Account'}</button>}\r\n//           {isLoading && <p>Loading...</p>}\r\n//           <button\r\n//             type='button'\r\n//             className={classes.toggle}\r\n//             onClick={switchAuthModeHandler}\r\n//           >\r\n//             {isLogin ? 'Create new account' : 'Login with existing account'}\r\n//           </button>\r\n//         </div>\r\n//       </form>\r\n//     </section>\r\n// \t\t// <Card className={classes.login}>\r\n// \t\t// \t<form onSubmit={createAccountHandler}>\r\n// \t\t// \t\t<div className={`${classes.control} ${emailIsValid === false ? classes.invalid : ''}`}>\r\n// \t\t// \t\t\t<label htmlFor=\"email\">E-Mail form2</label>\r\n// \t\t// \t\t\t<input\r\n// \t\t// \t\t\t\ttype=\"email\"\r\n// \t\t// \t\t\t\tid=\"email\"\r\n// \t\t// \t\t\t\tref={userenterEmail}\r\n// \t\t// \t\t\t\tvalue={enteredEmail}\r\n// \t\t// \t\t\t\tonChange={emailChangeHandler}\r\n// \t\t// \t\t\t\tonBlur={validateEmailHandler}\r\n// \t\t// \t\t\t/>\r\n// \t\t// \t\t</div>\r\n// \t\t// \t\t<div\r\n// \t\t// \t\t\tclassName={`${classes.control} ${passwordIsValid === false\r\n// \t\t// \t\t\t\t? classes.invalid\r\n// \t\t// \t\t\t\t: ''}`}\r\n// \t\t// \t\t>\r\n// \t\t// \t\t\t<label htmlFor=\"password\">Password</label>\r\n// \t\t// \t\t\t<input\r\n// \t\t// \t\t\t\ttype=\"password\"\r\n// \t\t// \t\t\t\tid=\"password\"\r\n// \t\t// \t\t\t\tref= {userenterPassword}\r\n// \t\t// \t\t\t\tvalue={enteredPassword}\r\n// \t\t// \t\t\t\tonChange={passwordChangeHandler}\r\n// \t\t// \t\t\t\tonBlur={validatePasswordHandler}\r\n// \t\t// \t\t\t/>\r\n// \t\t// \t\t</div>\r\n// \t\t// \t\t<div className={classes.actions}>\r\n// \t\t// \t\t\t<Button\r\n// \t\t// \t\t\t\ttype=\"submit\"\r\n// \t\t// \t\t\t\tclassName={classes.btn}\r\n// \t\t// \t\t\t\tdisabled={!formIsValid} // deactivate until verified\r\n// \t\t// \t\t\t> Login </Button>\r\n\t\t\t\t\t\r\n// \t\t// \t\t\t<button onClick = {createAccountHandler}> Create an account</button>\r\n\t\t\t\t\r\n// \t\t// \t\t</div>\r\n// \t\t// \t</form>\r\n// \t\t// </Card>\r\n// \t);\r\n// };\r\n\r\n// export default Login;\r\n"]},"metadata":{},"sourceType":"module"}